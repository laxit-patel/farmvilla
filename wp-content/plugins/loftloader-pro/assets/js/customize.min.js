!function(s,c){"use strict";function r(){var a=s.settings.settings,l={},e=s.settings.controls;c.each(e,function(i,o){var e,t,n,r=(e=o.settings,t=Object.keys(e),!!(n="default"in e?"default":!!t.length&&t[0])&&e[n]);r&&a[r]&&a[r].dependency&&c.each(a[r].dependency,function(t,e){var n={control:s.control(i)||o,dependency:a[r].dependency};t in l?l[t].push(n):(l[t]=[n],s(t).bind(function(e){s.trigger("loftloader.setting.change",t)}))})}),s.LoftLoaderDependency=l}c("head").append(c("<style>",{id:"loftloader-pro-hide-site-title",text:".site-title { opacity:  0; }"})),s.LoftLoaderSwitchSection=s.Section.extend({initialize:function(){return s.Section.prototype.initialize.apply(this,arguments)},ready:function(){var e=!!this.container.find("input[name=loftloader-pro-main-switch]").attr("checked");c("#customize-theme-controls").attr("class","loftloader-controls-wrapper"),!e&&c("#customize-theme-controls").addClass("loftloader-settings-disabled")},attachEvents:function(){var o=this.container;o.on("change","input[name=loftloader-pro-main-switch]",function(e){var t=!!c(this).attr("checked"),n=o.find("#customize-control-loftloader_pro_main_switch_control input[type=checkbox]"),i=c("#customize-theme-controls");t?n.attr("checked","checked"):n.removeAttr("checked"),n.trigger("change"),t?i.removeClass("loftloader-settings-disabled"):i.addClass("loftloader-settings-disabled")})}}),c.extend(s.sectionConstructor,{loftloader_switch:s.LoftLoaderSwitchSection}),s.controlConstructor.slider=s.Control.extend({ready:function(){var e=this.container.find(".loader-ui-slider"),n=this.container.find("input[data-customize-setting-link]");e.slider({range:"min",min:e.data("min"),max:e.data("max"),value:e.data("value"),step:e.data("step"),slide:function(e,t){n.val(t.value).trigger("change")}})}}),s.bind("loftloader.message.position",function(){var e=c("input[data-customize-setting-link=loftloader_progress]:checked").val(),t=c("input[data-customize-setting-link=loftloader_percentageposition]:checked").val(),n=c("input[data-customize-setting-link=loftloader_barposition]:checked").val(),i=c("input[data-customize-setting-link=loftloader_pro_message_position]"),o=i.filter("[value=middle]");"bar"===e&&"middle"===n||"number"===e&&"below"===t?o.parent().css("display",""):(i.filter("[value=middle]:checked").length&&(i.filter("[value=bottom]").attr("checked","").trigger("change"),o.removeAttr("checked")),o.parent().css("display","none"))}),s.bind("loftloader.setting.change",function(e){e in s.LoftLoaderDependency&&c.each(s.LoftLoaderDependency[e],function(e,t){var n=t.control.container,o=!0;c.each(t.dependency,function(e,t){var n=t.operator||"in",i=function(e){if(e in s.settings.settings){var t=s.get()[e];return!0===t?"on":t}}(e);if("in"==n&&-1===t.value.indexOf(i)||"not in"==n&&-1!==t.value.indexOf(i))return o=!1}),o?n.show():n.hide()})}),s.bind("ready",function(e){var t,n=document.createElement("a");n.href=s.previewer.previewUrl(),t=s.utils.parseQueryString(n.search.substr(1)),r(),s.previewer.unbind("url").bind("url",function(e){var t,n,i=this,o=!1;(n=document.createElement("a")).href=e,n.search=c.param({plugin:"loftloader"}),e=n.href,i.scroll=0,t=function(){o=!0},i.previewUrl.bind(t),i.previewUrl.set(e),i.previewUrl.unbind(t),o||i.refresh()}),t.plugin||(t.plugin="loftloader",n.search=c.param(t),s.previewer.previewUrl.set(n.href)),loftloader_i18n&&c(".site-title").text(loftloader_i18n.name),c("#loftloader-pro-hide-site-title").remove(),s.trigger("loftloader.message.position");var o=["loftloader_bgfilltype","loftloader_progress","loftloader_animation"];function i(e,t){if(-1!==o.indexOf(t)){var n=e.find("input[data-customize-setting-link]:checked").val(),i=e.parents("ul").first();"none"===n?i.addClass("loftloader-control-disabled"):i.removeClass("loftloader-control-disabled")}}c.each(o,function(e,t){var n=c("input[data-customize-setting-link="+t+"]:checked");n.length&&i(n.parents("li.customize-control").first(),t)}),c("body").on("change","input[name=loftloader_pro_barwidth_unit]",function(e){var t=!!c(this).attr("checked"),n=c("#customize-control-loftloader_pro_progress_width_unit input[type=checkbox]");t?n.attr("checked","checked"):n.removeAttr("checked"),n.trigger("change")}).on("change","input.loftlader-pro-checkbox",function(e){var t=!!c(this).attr("checked"),n=c(this).siblings("input");n.length&&(t?n.attr("checked","checked"):n.removeAttr("checked"),n.trigger("change"))}).on("change","input[type=number]",function(e){var t=c(this),n=!1,i=t.attr("min")?parseInt(t.attr("min")):1,o=t.val()?parseInt(t.val()):0,r=!!t.attr("max")&&parseInt(t.attr("max"));i&&o<i&&(o=i,n=!0),r&&r<o&&(o=r,n=!0),n&&t.val(o).trigger("change")}).on("click",".customize-more-toggle",function(e){e.preventDefault();var t=c(this),n=c(this).siblings(".customize-control-description");n.length&&(t.hasClass("expanded")?n.slideUp("slow"):n.slideDown("slow",function(){c(this).css("display","block")}),t.toggleClass("expanded"))}).on("change","input[type=radio]",function(e){var t=c(this).attr("data-customize-setting-link");switch(-1!==o.indexOf(t)&&i(c(this).parents("li.customize-control").first(),t),t){case"loftloader_progress":case"loftloader_barposition":case"loftloader_percentageposition":s.trigger("loftloader.message.position")}}).on("click",".loftloader-pro-any-page-generate",function(e){e.preventDefault();var t=s.loftloader_pro_generate_parameters();c(this).siblings(".loftloader-pro-any-page-shortcode").attr("rows",40).val("[loftloader "+t+"]").select()})})}(wp.customize,jQuery);